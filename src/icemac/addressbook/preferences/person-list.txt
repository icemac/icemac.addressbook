=================================
 Preferences for the person list
=================================

The person list can be customized using preferences:

Set up
======

We need an address book:

>>> from icemac.addressbook.testing import create_addressbook
>>> create_addressbook()
<AddressBook u'ab' (u'test address book')>

And a browser to access it:

>>> from zope.testbrowser.testing import Browser
>>> browser = Browser()
>>> browser.addHeader('Authorization', 'Basic mgr:mgrpw')
>>> browser.open('http://localhost/++skin++AddressBook/ab')

Default preferences
===================

By default the list is ordered by the `person last name` column in
ascending direction:

>>> browser.getLink('Preferences').click()
>>> browser.getControl('sort direction').displayValue
['ascending (A-->Z)']
>>> browser.getControl('order by').displayValue
['person -- last name']

Two columns are displayed by default. As the widget is a
JavaScript-In-Out-Widget, we have to access the second list here:

>>> browser.getControl(name='form.widgets.columns.to').displayOptions
['person -- last name', 'person -- first name']

.. to test:
.. sortierung nach Feld, das nicht in Columns ist
.. user defined fields in column list
.. user defined fields can be displayed in person list
.. person list does not break when a displayed user defined field gets deleted

.. to add:
.. generation which adds default preferences provider
