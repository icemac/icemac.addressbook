<configure
   xmlns="http://namespaces.zope.org/zope"
   xmlns:browser="http://namespaces.zope.org/browser"
   xmlns:z3c="http://namespaces.zope.org/z3c"
   xmlns:gocept="http://namespaces.gocept.com/zcml"
   i18n_domain="icemac.addressbook">

  <adapter factory=".edit.PersonCount" />

  <!-- Root folder view -->
  <z3c:pagelet
     name="addAddressBook.html"
     for="zope.site.interfaces.IRootFolder"
     permission="zope.ManageContent"
     layer="icemac.addressbook.browser.interfaces.IAddressBookLayer"
     class=".add.AddForm"
     />

  <browser:defaultView
     name="index.html"
     layer="icemac.addressbook.browser.interfaces.IAddressBookLayer"
     for="zope.site.interfaces.IRootFolder"
     />

  <!-- views on address book -->
  <gocept:pagelet
     name="index.html"
     for="...interfaces.IAddressBook"
     permission="icemac.addressbook.ViewAddressBook"
     layer="icemac.addressbook.browser.interfaces.IAddressBookLayer"
     class=".list.PersonList"
     template="overview.pt"
     />

  <browser:defaultView
     name="index.html"
     layer="icemac.addressbook.browser.interfaces.IAddressBookLayer"
     for="icemac.addressbook.interfaces.IAddressBook"
     />

  <browser:viewlet
     name="Person list"
     viewName="@@index.html"
     for="*"
     manager="icemac.addressbook.browser.menus.interfaces.IMainMenu"
     class="z3c.menu.ready2go.item.SiteMenuItem"
     permission="icemac.addressbook.ViewAddressBook"
     layer="icemac.addressbook.browser.interfaces.IAddressBookLayer"
     weight="1"
     />

  <z3c:pagelet
     name="edit.html"
     for="...interfaces.IAddressBook"
     permission="icemac.addressbook.EditAddressBook"
     layer="icemac.addressbook.browser.interfaces.IAddressBookLayer"
     class=".edit.EditForm"
     />

  <browser:viewlet
     manager="icemac.addressbook.browser.menus.interfaces.IMainMenu"
     name="Edit address book"
     viewName="@@edit.html"
     weight="999"
     class="z3c.menu.ready2go.item.SiteMenuItem"
     permission="icemac.addressbook.EditAddressBook"
     layer="icemac.addressbook.browser.interfaces.IAddressBookLayer"
     />

  <z3c:pagelet
     name="delete_address_book.html"
     for="icemac.addressbook.interfaces.IAddressBook"
     permission="icemac.addressbook.EditAddressBook"
     layer="icemac.addressbook.browser.interfaces.IAddressBookLayer"
     class=".edit.DeleteForm"
     />

  <z3c:pagelet
     name="delete_content.html"
     for="icemac.addressbook.interfaces.IAddressBook"
     permission="icemac.addressbook.EditAddressBook"
     layer="icemac.addressbook.browser.interfaces.IAddressBookLayer"
     class=".edit.DeleteContentForm"
     />

  <!-- Add menu -->
  <browser:viewlet
     name="person"
     viewName="@@addPerson.html"
     for="icemac.addressbook.interfaces.IAddressBook"
     manager="icemac.addressbook.browser.menus.interfaces.IAddMenu"
     class="z3c.menu.ready2go.item.AddMenuItem"
     permission="icemac.addressbook.AddPerson"
     layer="icemac.addressbook.browser.interfaces.IAddressBookLayer"
     weight="1"
     />


</configure>
